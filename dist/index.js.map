{"version":3,"sources":["main.js","index.js"],"names":["express","require","Client","qrImage","app","client","qrCodeData","on","qr","session","console","log","initialize","msg","error","catch","err","process","exit","use","json","get","req","res","qrImageBuffer","imageSync","type","writeHead","end","post","phoneNumbers","message","body","Array","isArray","Error","phoneNumber","chatId","sendMessage","status","send","PORT","env","module","exports","port","listen"],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["const express = require('express');\nconst { Client } = require('whatsapp-web.js');\nconst qrImage = require('qr-image');\n\nconst app = express();\nconst client = new Client();\n\nlet qrCodeData;\n\nclient.on('qr', qr => {\n    qrCodeData = qr;\n});\n\nclient.on('authenticated', session => {\n    console.log('Authenticated');\n    console.log('Session: ', session);\n});\n\nclient.on('ready', () => {\n    console.log('Client is ready!');\n});\n\nclient.on('disconnected', () => {\n    console.log('Client disconnected, trying to reconnect...');\n    client.initialize();\n});\n\nclient.on('auth_failure', msg => {\n    console.error('Authentication failed:', msg);\n});\n\nclient.initialize().catch(err => {\n    console.error('Initialization failed:', err);\n    process.exit(1);\n});\n\napp.use(express.json());\n\napp.get('/', (req, res) => {\n    const qrImageBuffer = qrImage.imageSync(qrCodeData, { type: 'png' });\n    res.writeHead(200, { 'Content-Type': 'image/png' });\n    res.end(qrImageBuffer);\n});\n\napp.post('/send-message', async (req, res) => {\n    try {\n        const { phoneNumbers, message } = req.body;\n        if (!phoneNumbers || !Array.isArray(phoneNumbers) || !message) {\n            throw new Error('Invalid request body');\n        }\n        for (const phoneNumber of phoneNumbers) {\n            const chatId = `${phoneNumber}@c.us`;\n            await client.sendMessage(chatId, message);\n            console.log(`Message sent successfully to ${phoneNumber}`);\n        }\n        res.status(200).send('Messages sent successfully!');\n    } catch (error) {\n        console.error('Error sending message:', error);\n        res.status(500).send('Error sending message');\n    }\n});\n\nconst PORT = process.env.PORT || 3000;\n// app.listen(PORT, () => {\n//     console.log(`Server is running on port ${PORT}`);\n// });\nmodule.exports = app;","const app = require('./main');\r\n\r\nconst port = '8888';\r\n\r\napp.listen(port, () => {\r\n  console.log(`Server is listening on port ${port}...`);\r\n});"]}